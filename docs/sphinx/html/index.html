

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>RAJA User Documentation &mdash; RAJA 1.0.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="RAJA 1.0.0 documentation" href="#"/>
        <link rel="next" title="Configuring and building the code" href="config_build.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="#" class="icon icon-home"> RAJA
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="config_build.html">Configuring and building the code</a></li>
<li class="toctree-l1"><a class="reference internal" href="test_examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="future.html">Future development</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="#">RAJA</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="#">Docs</a> &raquo;</li>
      
    <li>RAJA User Documentation</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/index.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="raja-user-documentation">
<h1>RAJA User Documentation<a class="headerlink" href="#raja-user-documentation" title="Permalink to this headline">¶</a></h1>
<p>RAJA is a architecture portability abstraction software library for HPC
applications that is being developed at Lawrence Livermore National
Laboratory. The overarching goals of RAJA are to:</p>
<blockquote>
<div><ul class="simple">
<li>make existing (production) applications <em>portable with minimal disruption</em></li>
<li>provide a model for new application development so that they are portable
from inception.</li>
</ul>
</div></blockquote>
<p>RAJA uses standard C++11 &#8211; C++ is the predominant programming language used
many LLNL codes. RAJA shares goals and concepts found in other C++ portability
abstraction approaches, such as <a class="reference external" href="https://github.com/kokkos/kokkos">Kokkos</a>
and <a class="reference external" href="https://developer.nvidia.com/thrust">Thrust</a>.  However, RAJA provides
constructs that are absent in other models and which are used heavily in LLNL
mesh-based multiphysics codes. Also, another goal of RAJA is to adapt concepts
and specialize them for different code implementation patterns and C++ usage,
since data structures and algorithms vary widely across applications.</p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Loops are the main conceptual abstraction in RAJA. A typical large
multiphysics code contains O(10K) loops. These loops are where most
computational work is performed and where most fine-grained parallelism is
available. RAJA defines a systematic loop encapsulation paradigm that helps
insulate application developers from implementation details associated with
software and hardware platform choices. Such details include: non-portable
compiler and platform-specific directives, parallel programming model usage
and constraints, and hardware-specific data management. RAJA can be used
incrementally and selectively in an application and works with the native
data structures and loop traversal patterns in a code.</p>
<p>A typical RAJA integration approach is a multi-step process involving steps of
increasing complexity. First, basic transformation of loops to the &#8220;RAJA form&#8221;
is reasonably straightforward and can be even mundane in many cases. The
initial transformation makes the code portable by enabling it to execute
on both CPU and GPU hardware by choosing various parallel programming model
back-ends at compile-time. Second, loop <em>execution policy</em> choices can be
refined based on an analysis of loops. Careful categorization of loop patterns
and workloads is key to selecting the best choices for mapping loop execution
to available hardware resources for high performance. Important considerations
include: the relationship between data movement and computation (operations
performed per byte moved), control flow branching intensity, and available
parallelism. Earlier, we stated that large multiphysics codes contains O(10K)
loops. However, such codes typically contains only O(10) <em>loop patterns</em>.
Thus, a goal of transforming a code to RAJA should be to assign loops to
execution equivalence classes so that similar loops may be mapped to particular
parallel execution choices or hardware resources in a consistent fashion.</p>
<p>Like other C++-based portability layer abstraction approaches, RAJA relies
on decoupling the body of a loop from the mechanism that executes the loop;
i.e., its <em>traversal</em>. This allows the same traversal method to be applied
to many different loop bodies and different traversals to be applied to the
same loop body for different execution scenarios. In RAJA, the decoupling is
achieved by re-casting a loop into the generally-accepted &#8220;parallel for&#8221; idiom.</p>
<p>This loop decoupling enables the cooperating encapsulation features of RAJA
which include:</p>
<blockquote>
<div><ul class="simple">
<li><strong>Trversals and execution policies.</strong> A traversal method specialized
with an execution policy template parameter defines how a loop will be
executed; e.g., sequentially, multithreaded using OpenMP, or run on
a GPU as a CUDA kernel.</li>
<li><strong>IndexSets.</strong>  IndexSets enable much more flexible and powerful ways
to control loop iterations than simple for-loops. IndexSets allow
iteration order to be changed in ways which can, for example, enable
parallel execution of a non-data-parallel loop without rewriting the
loop body. Typically, an IndexSet is used to partition an iteration
space into <em>Segments</em>, or &#8220;chunks&#8221; of iterations. Then, different
iteration subsets may be launched in parallel and dependencies among
them can be managed. IndexSets also enable coordination between iteration
and data placement; specifically, chunks of data and iterations can be
mapped to individual cores in an architecture-specific way. While
IndexSets provide the flexibility to be defined at runtime, compilers
can optimize execution of kernels for different <em>Segment type</em>
implementations at compile-time. For example, a Segment type
implementation that processes contiguous index ranges can be optimized
in ways that an indirection Segment type implementation cannot.</li>
<li><strong>Data type encapsulation.</strong> RAJA provides data and pointer types that
can be used to hide non-portable compiler directives and data attributes,
such as alignment, restrict, etc. These compiler-specific data decorations
often enhance a compiler&#8217;s ability to optimize. While these types are not
required to use RAJA, they are a good idea in general for HPC codes. They
eliminate the need to litter a code with detailed, non-portable syntax
and enable architecture or compiler-specific information to be propagated
throughout an application code with localized changes in a header file.
For any parallel reduction operation, RAJA does require a
<em>reduction class template</em> to be used. Template specialization of a
reduction in a manner similar to the way a traversal method is specialized
on an execution policy type enables a portable reduction operation while
hiding programming model-specific reduction constructs, such as OpenMP
vs. CUDA, from application code.</li>
</ul>
</div></blockquote>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p>More detailed discussion of RAJA, including its use in proxy apps included
in the RAJA source distribution can be found in these reports:</p>
<p><a class="reference external" href="file:../RAJAStatus-09.2014_LLNL-TR-661403.pdf">The RAJA Portability Layer: Overview and Status (2014)</a></p>
<p class="last"><a class="reference external" href="file:../RAJAOverview-Trilab-09.2015_LLNL-TR-677453.pdf">RAJA Overview (extracted from ASC Tri-lab Co-design Level 2 Milestone Report 2015)</a></p>
</div>
<p><strong>Contents:</strong></p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="config_build.html">Configuring and building the code</a><ul>
<li class="toctree-l2"><a class="reference internal" href="config_build.html#raja-cmake-system">RAJA CMake System</a></li>
<li class="toctree-l2"><a class="reference internal" href="config_build.html#raja-configuration-options">RAJA configuration options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="test_examples.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="test_examples.html#basic-tests">Basic tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_examples.html#example-applications">Example applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="future.html">Future development</a></li>
</ul>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="config_build.html" class="btn btn-neutral float-right" title="Configuring and building the code" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, LLNS.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>