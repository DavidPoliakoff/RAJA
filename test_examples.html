<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tests and Examples &mdash; RAJA 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="RAJA 1.0.0 documentation" href="index.html" />
    <link rel="next" title="Future development" href="future.html" />
    <link rel="prev" title="RAJA source code organization" href="code_organization.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="future.html" title="Future development"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="code_organization.html" title="RAJA source code organization"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">RAJA 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="tests-and-examples">
<h1>Tests and Examples<a class="headerlink" href="#tests-and-examples" title="Permalink to this headline">¶</a></h1>
<p>The RAJA code comes with several simple test codes and proxy-app examples
that illustrate various usage scenarios. When RAJA is compiled, these
executables are built in their default configurations. They can be run by
invoking the executables in the build space &#8216;raja/test&#8217; subdirectories whose
names are descriptive of their contents. These codes can be modified to
experiment with them and run using various options that we describe later
in this section. <strong>Note that the modifications must be made in the &#8216;raja/test&#8217;
subdirectories in the actual source code, not in the build space.</strong></p>
<p><strong>NOTE:</strong> RAJA must be built with CUDA enabled to generate GPU variants.
When running CUDA variants of the tests and examples, we advise you to set the
environment variable CUDA_VISIBLE_DEVICES to zero before running.</p>
<p>For example, for C-shell users</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ setenv CUDA_VISIBLE_DEVICES 0
</pre></div>
</div>
<p>We are using CUDA Unified Memory and we find that this environment setting
greatly improves performance.</p>
<div class="section" id="basic-tests">
<h2>Basic tests<a class="headerlink" href="#basic-tests" title="Permalink to this headline">¶</a></h2>
<p>The directory &#8216;raja/test/unit-tests&#8217; has two subdirectories, each of which
contains files that run various traversal and reduction operations for RAJA
IndexSets and Segments. All RAJA &#8220;forall&#8221; template and execution policy
options that are available for a given compiler are included. Running these
tests is a good sanity check that the code is built correctly and works. The
two subdirectories are:</p>
<blockquote>
<div><ul class="simple">
<li><strong>CPUtests.</strong> It contains codes to run traversl and reduction tests for
sequential, OpenMP, and CilkPlus (if available) execution policies.</li>
<li><strong>GPUtests.</strong> It contains codes to run traversl and reduction tests for
GPU CUDA execution policies. Note that these tests use Unified Memory
to simplify host-device memory transfers.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="example-applications">
<h2>Example applications<a class="headerlink" href="#example-applications" title="Permalink to this headline">¶</a></h2>
<p>The directory &#8216;raja/test&#8217; has subdirectories containing examples of RAJA
used in the proxy apps LULLED (versions 1.0 and 2.0), Kripke, and CoMD.
Reference versions of these applications are also included so that it is
easy to compare them to the RAJA variants, in terms of source code
differences and runtimes. Here is a brief explanation of the contents of
the directories containing the proxy app examples.</p>
<blockquote>
<div><ul>
<li><p class="first"><strong>LULESH 1.0.</strong></p>
<p>The directory &#8216;LULESH-v1.0_baseline&#8217; contains the reference version of
LULESH 1.0 that is available at
<a class="reference external" href="https://codesign.llnl.gov/lulesh.php">LULESH</a></p>
<p>The directory &#8216;LULESH-v1.0_RAJA-variants&#8217; contains three RAJA variants of
LULESH 1.0: serial-only, a highly-parametrized version that can be run
using various execution patterns, and a version that shows a RAJA-based
transient fault recovery capability. The names of the files indicate which
version is which. The parametrized version of this code
illustrates ten different execution patterns that can be enabled using
RAJA. These patterns include sequential execution, six variants
using OpenMP (using RAJA IndexSets for tiling, permuting elements,
coloring, dependency scheduling, etc.), CilkPlus, and two GPU variants
that use CUDA. Some of these require specific initialization code
for data and RAJA IndexSets. However, all variations use the same
algorithm source code; different variations use different RAJA
execution policies. To try different variants, simply change the
definition of the macro constant</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#define USE_CASE ....</span>
</pre></div>
</div>
<p>in the header file called &#8216;luleshPolicy.hxx&#8217;. There you will find a listing
of available options and the RAJA policies used for each.</p>
</li>
<li><p class="first"><strong>LULESH 2.0.</strong></p>
<p>The directory &#8216;LULESH-v2.0_baseline&#8217; contains the reference version of
LULESH 2.0 that is available at
<a class="reference external" href="https://codesign.llnl.gov/lulesh.php">LULESH</a></p>
<p>The directory &#8216;LULESH-v2.0_RAJA-basic&#8217; contains a basic translation to
RAJA that uses only RAJA forall traversals that take begin-end arguments or
arrays of indirection indices.</p>
<p>The directory &#8216;LULESH-v2.0_RAJA-IndexSet&#8217; contains a version that uses
RAJA IndexSets similarly to the parallel RAJA variant of LULESH 1.0.
Similar to the RAJA version of LULESH 1.0, this variant is parametrized
to run with different execution patterns. However, only three variants
are available (we got tired...). As in the case of LULESH 1.0, change
the definition of the &#8216;USE_CASE&#8217; macro constant in the &#8216;luleshPolicy.hxx&#8217;
header file to change the variant.</p>
<p>The directory &#8216;LULESH-v2.0_RAJA-MICfriendly&#8217; contains a version that
uses RAJA IndexSets to permute data and loop iteration ordering in ways
that can be beneficial in a manycore environment.</p>
</li>
<li><p class="first"><strong>Kripke.</strong></p>
<p>The directory &#8216;Kripke-v1.1-baseline&#8217; contains the reference version of
Kripke v1.1 that uses basic OpenMP threading and zone-sequential sweep
traversals.  It is available at
<a class="reference external" href="https://codesign.llnl.gov/kripke.php">Kripke</a></p>
<p>The directory &#8216;Kripke-v1.1-RAJA&#8217; contains the RAJA version of Kripke v1.1
that uses the nested-loop RAJA forallN traversals and
IndexSets to perform hyperplane sweep traversals.</p>
<p>Currently there are issues building with the Intel compiler which are being
investigated.  As a result, building the RAJA version of Kripke with icpc
will diable all but the DGZ data layouts, and disables complex execution
policies.  Once a resolution to these issues have been found, this code will
be updated.</p>
</li>
</ul>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tests and Examples</a><ul>
<li><a class="reference internal" href="#basic-tests">Basic tests</a></li>
<li><a class="reference internal" href="#example-applications">Example applications</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="code_organization.html"
                        title="previous chapter">RAJA source code organization</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="future.html"
                        title="next chapter">Future development</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/test_examples.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="future.html" title="Future development"
             >next</a> |</li>
        <li class="right" >
          <a href="code_organization.html" title="RAJA source code organization"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">RAJA 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Rich Hornung and Jeff Keasler.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.1.
    </div>
  </body>
</html>